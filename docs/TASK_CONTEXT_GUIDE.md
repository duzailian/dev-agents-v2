# TASK_CONTEXT_GUIDE

> 本文件用于给每个小任务提供统一的“写作/交付”上下文与格式指引。
> 在执行任何任务前，请先阅读本文件；执行中严格遵循对应任务的指引。

---

## 任务1-1指引：REQUIREMENTS.md（需求规范）

### 1. 目标与读者
- **目标**：将“18点核心需求”从口头描述转为可执行、可验收、可实现的规范文档。
- **读者**：固件开发/测试工程师、平台开发工程师、项目负责人（PM）、未来维护者。

### 2. 输出与长度
- 输出文件：`docs/REQUIREMENTS.md`
- 行数要求：**400-500行**（Markdown；以“行”为计数单位，确保信息密度高但可读）

### 3. 内容范围（必须覆盖）
必须覆盖并细化如下类目：
1) **功能需求**：自动改代码、启动测试、获取结果、自动决策循环、任务编排/执行引擎等
2) **测试环境**：QEMU、目标板（BMC/树莓派/Windows脚本）、环境抽象层
3) **知识库**：结构化经验沉淀、产品线标签、文档导入、对话接口
4) **集成**：Redmine、GitLab CI、内网大模型API（优先）、可选Claude Code Skills
5) **工程实践**：模块化、可观测性、权限与安全、配置化、可扩展

### 4. 文档结构（推荐模板）
建议包含以下章节（可根据需要扩展，但不要缺失关键章节）：
1. 背景与目标
2. 术语与缩略语
3. 范围（In/Out of Scope）
4. 用户画像与使用场景
5. 总体需求概览（表格）
6. 功能需求（逐条编号：FR-xx）
7. 非功能需求（逐条编号：NFR-xx）
8. 测试环境需求（逐条编号：TR-xx）
9. 知识库与RAG需求（逐条编号：KR-xx）
10. 集成需求（逐条编号：IR-xx）
11. 数据与日志（审计/可追溯）
12. 验收标准（按阶段/按用例）
13. 风险、假设、约束
14. 里程碑与交付物映射（到 Phase 1 文档）

### 5. 写作要求（必须遵守）
- **编号规范**：每条需求必须有唯一ID（例如 `FR-01`）。
- **每条需求必须包含**：
  - 描述（What）
  - 理由/价值（Why，简短即可）
  - 验收标准（Acceptance Criteria，尽量可测试）
  - 优先级（P0/P1/P2）
  - 依赖（可选）
- **避免空泛**：避免“支持/可用/易用”等无验收条件的描述。
- **贴近落地**：结合固件开发测试的实际流程（patch→build→boot→run tests→collect logs→analyze→iterate）。
- **与后续设计衔接**：需求中应显式指出将被哪些模块/文档实现（例如：状态机、Agent、知识库Schema）。

### 6. 质量门槛
- 需求之间不应互相矛盾。
- 对关键路径（修改→测试→分析→决策）必须给出端到端的可验收闭环描述。
- 明确“失败处理/重试/回滚/人工介入点”。
- 明确“数据留存/审计/复现”的要求。

---

## 其他任务指引（占位）
后续任务（1-2、1-3...）将在需要时补充对应指引。
